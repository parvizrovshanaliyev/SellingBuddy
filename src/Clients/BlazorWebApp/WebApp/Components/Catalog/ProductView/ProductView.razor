@using WebApp.Domain.Catalog

<div class="col-md-3 col-sm-6">
    <div class="product-grid">
        <div class="product-image">
            <a href="#">
                <img class="pic-1" src="@GetProductImageUrl(CatalogItem.PictureUri)" />
            </a>
        </div>
        <div class="product-content">
            <h3 class="title">
                <a href="#">@CatalogItem.Name</a>
            </h3>
            <div class="price">$@CatalogItem.Price.ToString("C")</div>
            <a class="add-to-cart" href="javascript:void(0)" @onclick="OnClick">+ Add To Cart</a>
        </div>
    </div>
</div>

@code {
    [Parameter]
    public CatalogItem CatalogItem { get; set; }

    [Parameter]
    public EventCallback OnClick { get; set; }

    // Helper method to construct the product image URL
    private string GetProductImageUrl(string pictureUri)
    {
    // Replace with the actual base URL or use a configuration value for the base URL
        string baseUrl = "http://localhost:5004/";

    // Ensure the picture URI is not null or empty
        return string.IsNullOrEmpty(pictureUri) ? "/images/default-product.jpg" : $"{baseUrl}{pictureUri}";
    }
    
}